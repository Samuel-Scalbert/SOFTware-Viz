from app.app import app, db
from Utils.dashboard import dashboard
from flask import render_template

@app.route('/dashboard')
def dashboard_route():
    data = dashboard(db)
    #data = [{'used': 304, 'created': 129, 'shared': 1}, 23, 434, 0, {'LibriSpeech': ['hal-02907918'], 'SciGraph': ['hal-03559309'], 'GloVe': ['hal-02972180'], 'AllenNLP': ['hal-02972180'], 'SPARQL': ['hal-03602177'], 'Google Scholar': ['hal-03602177'], 'Ensembl': ['hal-03602177'], 'PLLib': ['lirmm-02335500'], 'ProvLake': ['lirmm-02335500'], 'ProvTracker': ['lirmm-02335500'], 'ProvManager': ['lirmm-02335500'], 'PolyProv-QueryEngine': ['lirmm-02335500'], 'scripts': ['lirmm-02335500'], 'PolyProvQueryEngine': ['lirmm-02335500'], 'Prov DBMS': ['lirmm-02335500'], 'script': ['lirmm-02335500'], 'uWSGI': ['lirmm-02335500'], 'Cython': ['lirmm-02335500'], 'Semantic Graph': ['lirmm-02335500'], 'Ubuntu': ['hal-03692175'], 'Azure SQL': ['hal-03692175'], 'BigQuery': ['hal-03692175'], 'SQLite': ['hal-03692175'], 'SGXJail': ['hal-03692175'], 'RTFNet': ['hal-03236409'], 'SAVIME': ['lirmm-03850420'], 'DJEnsemble': ['lirmm-03850420'], 'ENSEMBLE': ['lirmm-03850420'], 'Post-greSQL': ['lirmm-03850420'], 'Greenplum': ['lirmm-03850420'], 'NOSQL': ['lirmm-03850420'], 'Numpy': ['lirmm-03850420'], 'MADLib': ['lirmm-03850420'], 'scikit': ['hal-02931396'], 'TACRED': ['hal-03704042'], 'Open Information Extraction': ['hal-03704042'], 'Consensys': ['hal-04102737'], 'Xsens MVN 2022': ['hal-04102737'], 'libraries': ['hal-04102737'], 'Neurokit': ['hal-04102737'], 'NumPy': ['hal-04102737'], 'Matplotlib': ['hal-04102737'], 'DPiSAX': ['lirmm-02265726'], 'Hadoop': ['lirmm-02265726'], 'Scala': ['lirmm-02265726'], 'Apache Spark': ['lirmm-02265726'], 'Spark': ['lirmm-02265726'], 'PostgreSQL': ['lirmm-02265726'], 'ISNotes': ['hal-03284110'], 'TopRank': ['hal-03163763'], 'n -Greedy': ['hal-03163763'], 'E2Clab': ['hal-03332524'], 'Cypher': ['hal-03937274'], 'XQuery': ['hal-03937274'], 'scikit-learn': ['hal-04414815'], 'getUserLabel': ['hal-04414815'], 'Linux': ['hal-02530206'], 'MapReduce': ['hal-02530206'], 'GradStudents': ['hal-02530206'], 'Slice': ['lirmm-02045144'], 'RawData': ['lirmm-02045144'], 'windowData': ['lirmm-02045144'], 'GLDEX': ['lirmm-02045144'], 'Apache': ['lirmm-02045144'], 'MATLAB': ['lirmm-02045144'], 'UQlab': ['lirmm-02045144'], 'MPI': ['lirmm-02045144'], 'Google File System': ['lirmm-02045144'], 'ESPnet toolkit': ['hal-02166434'], 'Kaldi toolkit': ['hal-02166434'], 'Py-Torch': ['hal-04260221'], 'HuggingFace 6': ['hal-04260221'], 'spaCy library': ['hal-04260221'], 'PyTorch': ['hal-04260221'], 'Argotario': ['hal-04260221'], 'iNaturalist': ['hal-03871553'], 'GBIF': ['hal-03871553']}, {'Google Photos': ['hal-03871553']}, {'Scikit-Learn': ['lirmm-02335500'], 'TensorFlow': ['lirmm-02335500'], 'PyTorch': ['lirmm-02335500'], 'Scikit Learn': ['lirmm-02335500'], 'eLabFTW': ['hal-03905184'], 'COMSES': ['hal-03905184'], 'Apps': ['hal-03692175'], 'Ryoan': ['hal-03692175'], 'Open Enclave SDK': ['hal-03692175'], 'Pysavime': ['lirmm-03850420'], 'SciDB': ['lirmm-03850420'], 'VRoamer': ['hal-04102737'], 'Unity': ['hal-04102737'], 'GUsT': ['hal-04102737'], 'parSketch': ['lirmm-02265726'], 'LifeJoin': ['hal-04414815'], 'PostgreSQL': ['hal-04414815'], 'RDFQuotient': ['hal-02530206'], 'Spark': ['lirmm-02045144'], 'program': ['lirmm-02045144'], 'Scala': ['lirmm-02045144'], 'Excel': ['lirmm-02045144'], 'Python': ['lirmm-02045144'], 'ElectraForTokenClassification': ['hal-04260221'], 'BeeMachine': ['hal-03871553']}]
    #print("Template search path:",app.jinja_loader.searchpath)
    return render_template('pages/dashboard.html',data = data)