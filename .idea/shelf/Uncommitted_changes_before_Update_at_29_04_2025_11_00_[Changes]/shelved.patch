Index: app/app.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from flask import Flask, render_template\nfrom pyArango.connection import Connection\nfrom Utils.db import insert_json_db\nfrom Utils.home import home_data\napp = Flask(__name__,template_folder='templates',static_folder='static')\n\napp.config['ARANGO_HOST'] = 'arangodb'\n#app.config['ARANGO_HOST'] = 'localhost'\napp.config['ARANGO_PORT'] = 8529\napp.config['ARANGO_DB'] = 'SOF-viz'\napp.config['ARANGO_USERNAME'] = 'root'\napp.config['ARANGO_PASSWORD'] = 'root'\n\ndef init_db():\n    global db\n    db = Connection(\n        arangoURL='http://{host}:{port}'.format(\n            host=app.config['ARANGO_HOST'],\n            port=app.config['ARANGO_PORT']\n        ),\n        username=app.config['ARANGO_USERNAME'],\n        password=app.config['ARANGO_PASSWORD']\n    )\n    if not db.hasDatabase('SOF-viz'):\n        db.createDatabase('SOF-viz')\n    db = Connection(\n        arangoURL='http://{host}:{port}'.format(\n            host=app.config['ARANGO_HOST'],\n            port=app.config['ARANGO_PORT']\n        ),\n        username=app.config['ARANGO_USERNAME'],\n        password=app.config['ARANGO_PASSWORD']\n    )[app.config['ARANGO_DB']]\n\ninit_db()  # Call the init_db function to initialize the db variable\n\ninsert_json_db('./app/static/data/json_files/from_xml','./app/static/data/xml_meta', db)\nstructure = None\nglobal data_dashboard\ndata_dashboard = None\n#data_dashboard = dashboard(db, structure)\n\nfrom app.routes import doc_route, dashboard_route,reset_db, software_route, api_route, disambiguate_route, author_route\n\n@app.route('/')\ndef home():\n    data = home_data(db)\n    return render_template('pages/home.html', data=data[0])\n\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/app.py b/app/app.py
--- a/app/app.py	(revision 45b24c9d709ee6fea6ac83cee4262a06626878f3)
+++ b/app/app.py	(date 1742302926396)
@@ -2,10 +2,11 @@
 from pyArango.connection import Connection
 from Utils.db import insert_json_db
 from Utils.home import home_data
+
 app = Flask(__name__,template_folder='templates',static_folder='static')
 
-app.config['ARANGO_HOST'] = 'arangodb'
-#app.config['ARANGO_HOST'] = 'localhost'
+#app.config['ARANGO_HOST'] = 'arangodb'
+app.config['ARANGO_HOST'] = 'localhost'
 app.config['ARANGO_PORT'] = 8529
 app.config['ARANGO_DB'] = 'SOF-viz'
 app.config['ARANGO_USERNAME'] = 'root'
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project version=\"4\">\n  <component name=\"AutoImportSettings\">\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\n  </component>\n  <component name=\"ChangeListManager\">\n    <list default=\"true\" id=\"d4ff7c56-eadf-4a19-8d04-3bdf1d26371c\" name=\"Changes\" comment=\"handle files with no url\">\n      <change afterPath=\"$PROJECT_DIR$/corpus_I.zip\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/Utils/db.py\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/Utils/db.py\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/app/app.py\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/app.py\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/app/static/data/xml_files/log_xml/hal-01981553.grobid.tei.xml.log\" beforeDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/app/static/data/xml_files/log_xml/hal-03599214.grobid.tei.xml.log\" beforeDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/app/static/data/xml_files/log_xml/hal-03905078.grobid.tei.xml.log\" beforeDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/app/static/data/xml_files/log_xml/hal-04214094.grobid.tei.xml.log\" beforeDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/app/static/data/xml_files/log_xml/hal-04351729.grobid.tei.xml.log\" beforeDir=\"false\" />\n    </list>\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\n  </component>\n  <component name=\"FileTemplateManagerImpl\">\n    <option name=\"RECENT_TEMPLATES\">\n      <list>\n        <option value=\"Dockerfile\" />\n        <option value=\"HTML File\" />\n        <option value=\"Jupyter Notebook\" />\n        <option value=\"JavaScript File\" />\n        <option value=\"Python Script\" />\n      </list>\n    </option>\n  </component>\n  <component name=\"FlaskConsoleOptions\" custom-start-script=\"import sys&#10;sys.path.extend([WORKING_DIR_AND_PYTHON_PATHS])&#10;from flask.cli import ScriptInfo&#10;locals().update(ScriptInfo(create_app=None).load_app().make_shell_context())&#10;print(&quot;Python %s on %s\\nApp: %s [%s]\\nInstance: %s&quot; % (sys.version, sys.platform, app.import_name, app.env, app.instance_path))\">\n    <envs>\n      <env key=\"FLASK_APP\" value=\"app\" />\n    </envs>\n    <option name=\"myCustomStartScript\" value=\"import sys&#10;sys.path.extend([WORKING_DIR_AND_PYTHON_PATHS])&#10;from flask.cli import ScriptInfo&#10;locals().update(ScriptInfo(create_app=None).load_app().make_shell_context())&#10;print(&quot;Python %s on %s\\nApp: %s [%s]\\nInstance: %s&quot; % (sys.version, sys.platform, app.import_name, app.env, app.instance_path))\" />\n    <option name=\"myEnvs\">\n      <map>\n        <entry key=\"FLASK_APP\" value=\"app\" />\n      </map>\n    </option>\n  </component>\n  <component name=\"Git.Settings\">\n    <option name=\"PUSH_AUTO_UPDATE\" value=\"true\" />\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\n  </component>\n  <component name=\"GitHubPullRequestSearchHistory\">{\n  &quot;lastFilter&quot;: {\n    &quot;state&quot;: &quot;OPEN&quot;,\n    &quot;assignee&quot;: &quot;Samuel-Scalbert&quot;\n  }\n}</component>\n  <component name=\"GithubPullRequestsUISettings\">{\n  &quot;selectedUrlAndAccountId&quot;: {\n    &quot;url&quot;: &quot;https://github.com/Samuel-Scalbert/SOFTware-Viz.git&quot;,\n    &quot;accountId&quot;: &quot;17538fa1-4b8d-4857-8ffc-187f70c2e8ad&quot;\n  }\n}</component>\n  <component name=\"MarkdownSettingsMigration\">\n    <option name=\"stateVersion\" value=\"1\" />\n  </component>\n  <component name=\"ProblemsViewState\">\n    <option name=\"selectedTabId\" value=\"QODANA_PROBLEMS_VIEW_TAB\" />\n  </component>\n  <component name=\"ProjectColorInfo\">{\n  &quot;associatedIndex&quot;: 6\n}</component>\n  <component name=\"ProjectId\" id=\"2gas4pipszPJUXlPngewRRULMyW\" />\n  <component name=\"ProjectLevelVcsManager\">\n    <ConfirmationsSetting value=\"2\" id=\"Add\" />\n  </component>\n  <component name=\"ProjectViewState\">\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\n    <option name=\"showLibraryContents\" value=\"true\" />\n    <option name=\"showMembers\" value=\"true\" />\n  </component>\n  <component name=\"PropertiesComponent\"><![CDATA[{\n  \"keyToString\": {\n    \"DefaultHtmlFileTemplate\": \"HTML File\",\n    \"HTTP Request.generated-requests | #1.executor\": \"Run\",\n    \"Python tests.Python tests in test_db.py.executor\": \"Run\",\n    \"Python.dashboard.executor\": \"Run\",\n    \"Python.run.executor\": \"Run\",\n    \"Python.test.executor\": \"Run\",\n    \"RunOnceActivity.OpenProjectViewOnStart\": \"true\",\n    \"RunOnceActivity.ShowReadmeOnStart\": \"true\",\n    \"RunOnceActivity.git.unshallow\": \"true\",\n    \"WebServerToolWindowFactoryState\": \"false\",\n    \"database.data.extractors.current.export.id\": \"Comma-separated (CSV)_id\",\n    \"database.data.extractors.current.id\": \"Comma-separated (CSV)_id\",\n    \"git-widget-placeholder\": \"main\",\n    \"last_opened_file_path\": \"/home/sscalber/Bureau/SOFTware/SOFTware-Viz/app/static/data/url_verified_with_SH\",\n    \"node.js.detected.package.eslint\": \"true\",\n    \"node.js.detected.package.tslint\": \"true\",\n    \"node.js.selected.package.eslint\": \"(autodetect)\",\n    \"node.js.selected.package.tslint\": \"(autodetect)\",\n    \"nodejs_package_manager_path\": \"npm\",\n    \"settings.editor.selected.configurable\": \"com.jetbrains.python.configuration.PyActiveSdkModuleConfigurable\",\n    \"vue.rearranger.settings.migration\": \"true\"\n  }\n}]]></component>\n  <component name=\"PyCoverageOptionsProvider\">\n    <option name=\"myUseBundledCoveragePy\" value=\"true\" />\n  </component>\n  <component name=\"RecentsManager\">\n    <key name=\"CopyFile.RECENT_KEYS\">\n      <recent name=\"$PROJECT_DIR$/app/static/data/url_verified_with_SH\" />\n      <recent name=\"$PROJECT_DIR$/app/static\" />\n      <recent name=\"$PROJECT_DIR$\" />\n      <recent name=\"$PROJECT_DIR$/app/static/img\" />\n      <recent name=\"$PROJECT_DIR$/app/static/css\" />\n    </key>\n    <key name=\"MoveFile.RECENT_KEYS\">\n      <recent name=\"$PROJECT_DIR$/app/static/img\" />\n      <recent name=\"$PROJECT_DIR$/app/static/css\" />\n      <recent name=\"$PROJECT_DIR$/app/static\" />\n      <recent name=\"$PROJECT_DIR$/Utils\" />\n      <recent name=\"$PROJECT_DIR$/app/templates/partials\" />\n    </key>\n  </component>\n  <component name=\"RunManager\" selected=\"Python.run\">\n    <configuration name=\"generated-requests | #1\" type=\"HttpClient.HttpRequestRunConfigurationType\" factoryName=\"HTTP Request\" temporary=\"true\" nameIsGenerated=\"true\" path=\"$APPLICATION_CONFIG_DIR$/scratches/generated-requests.http\" runType=\"Run single request\">\n      <method v=\"2\" />\n    </configuration>\n    <configuration name=\"dashboard\" type=\"PythonConfigurationType\" factoryName=\"Python\" temporary=\"true\" nameIsGenerated=\"true\">\n      <module name=\"SOFTware-Viz\" />\n      <option name=\"ENV_FILES\" value=\"\" />\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\n      <option name=\"PARENT_ENVS\" value=\"true\" />\n      <envs>\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\n      </envs>\n      <option name=\"SDK_HOME\" value=\"\" />\n      <option name=\"WORKING_DIRECTORY\" value=\"$PROJECT_DIR$/Utils\" />\n      <option name=\"IS_MODULE_SDK\" value=\"true\" />\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\n      <EXTENSION ID=\"PythonCoverageRunConfigurationExtension\" runner=\"coverage.py\" />\n      <option name=\"SCRIPT_NAME\" value=\"$PROJECT_DIR$/Utils/dashboard.py\" />\n      <option name=\"PARAMETERS\" value=\"\" />\n      <option name=\"SHOW_COMMAND_LINE\" value=\"false\" />\n      <option name=\"EMULATE_TERMINAL\" value=\"false\" />\n      <option name=\"MODULE_MODE\" value=\"false\" />\n      <option name=\"REDIRECT_INPUT\" value=\"false\" />\n      <option name=\"INPUT_FILE\" value=\"\" />\n      <method v=\"2\" />\n    </configuration>\n    <configuration name=\"run\" type=\"PythonConfigurationType\" factoryName=\"Python\" temporary=\"true\" nameIsGenerated=\"true\">\n      <module name=\"SOFTware-Viz\" />\n      <option name=\"ENV_FILES\" value=\"\" />\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\n      <option name=\"PARENT_ENVS\" value=\"true\" />\n      <envs>\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\n      </envs>\n      <option name=\"SDK_HOME\" value=\"\" />\n      <option name=\"WORKING_DIRECTORY\" value=\"$PROJECT_DIR$\" />\n      <option name=\"IS_MODULE_SDK\" value=\"true\" />\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\n      <EXTENSION ID=\"PythonCoverageRunConfigurationExtension\" runner=\"coverage.py\" />\n      <option name=\"SCRIPT_NAME\" value=\"$PROJECT_DIR$/run.py\" />\n      <option name=\"PARAMETERS\" value=\"\" />\n      <option name=\"SHOW_COMMAND_LINE\" value=\"false\" />\n      <option name=\"EMULATE_TERMINAL\" value=\"false\" />\n      <option name=\"MODULE_MODE\" value=\"false\" />\n      <option name=\"REDIRECT_INPUT\" value=\"false\" />\n      <option name=\"INPUT_FILE\" value=\"\" />\n      <method v=\"2\" />\n    </configuration>\n    <configuration name=\"test\" type=\"PythonConfigurationType\" factoryName=\"Python\">\n      <module name=\"SOFTware-Viz\" />\n      <option name=\"ENV_FILES\" value=\"\" />\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\n      <option name=\"PARENT_ENVS\" value=\"true\" />\n      <envs>\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\n      </envs>\n      <option name=\"SDK_HOME\" value=\"\" />\n      <option name=\"SDK_NAME\" value=\"Python 3.10 (SOFTware-Viz)\" />\n      <option name=\"WORKING_DIRECTORY\" value=\"\" />\n      <option name=\"IS_MODULE_SDK\" value=\"false\" />\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\n      <EXTENSION ID=\"PythonCoverageRunConfigurationExtension\" runner=\"coverage.py\" />\n      <option name=\"SCRIPT_NAME\" value=\"$PROJECT_DIR$/test_db.py\" />\n      <option name=\"PARAMETERS\" value=\"\" />\n      <option name=\"SHOW_COMMAND_LINE\" value=\"false\" />\n      <option name=\"EMULATE_TERMINAL\" value=\"false\" />\n      <option name=\"MODULE_MODE\" value=\"false\" />\n      <option name=\"REDIRECT_INPUT\" value=\"false\" />\n      <option name=\"INPUT_FILE\" value=\"\" />\n      <method v=\"2\" />\n    </configuration>\n    <configuration default=\"true\" type=\"docker-deploy\" factoryName=\"docker-compose.yml\" temporary=\"true\">\n      <deployment type=\"docker-compose.yml\">\n        <settings />\n      </deployment>\n      <method v=\"2\" />\n    </configuration>\n    <list>\n      <item itemvalue=\"HTTP Request.generated-requests | #1\" />\n      <item itemvalue=\"Python.test\" />\n      <item itemvalue=\"Python.dashboard\" />\n      <item itemvalue=\"Python.run\" />\n    </list>\n    <recent_temporary>\n      <list>\n        <item itemvalue=\"Python.run\" />\n        <item itemvalue=\"Python.dashboard\" />\n        <item itemvalue=\"HTTP Request.generated-requests | #1\" />\n      </list>\n    </recent_temporary>\n  </component>\n  <component name=\"SharedIndexes\">\n    <attachedChunks>\n      <set>\n        <option value=\"bundled-js-predefined-d6986cc7102b-822845ee3bb5-JavaScript-PY-243.23654.177\" />\n        <option value=\"bundled-python-sdk-91d3a02ef49d-43b77aa2d136-com.jetbrains.pycharm.pro.sharedIndexes.bundled-PY-243.23654.177\" />\n      </set>\n    </attachedChunks>\n  </component>\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\n  <component name=\"TaskManager\">\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\n      <changelist id=\"d4ff7c56-eadf-4a19-8d04-3bdf1d26371c\" name=\"Changes\" comment=\"\" />\n      <created>1715946834143</created>\n      <option name=\"number\" value=\"Default\" />\n      <option name=\"presentableId\" value=\"Default\" />\n      <updated>1715946834143</updated>\n      <workItem from=\"1715946835146\" duration=\"2179000\" />\n      <workItem from=\"1716388940252\" duration=\"24456000\" />\n      <workItem from=\"1716912503795\" duration=\"1114000\" />\n      <workItem from=\"1716966557747\" duration=\"9828000\" />\n      <workItem from=\"1717053155939\" duration=\"2520000\" />\n      <workItem from=\"1717059000151\" duration=\"3000\" />\n      <workItem from=\"1717059038309\" duration=\"2000\" />\n      <workItem from=\"1717059190630\" duration=\"254000\" />\n      <workItem from=\"1717059455398\" duration=\"10000\" />\n      <workItem from=\"1717059503401\" duration=\"11000\" />\n      <workItem from=\"1717059526794\" duration=\"7000\" />\n      <workItem from=\"1717062533191\" duration=\"13176000\" />\n      <workItem from=\"1717424322054\" duration=\"772000\" />\n      <workItem from=\"1717660189015\" duration=\"41691000\" />\n      <workItem from=\"1718269807370\" duration=\"6000\" />\n      <workItem from=\"1718786683128\" duration=\"62000\" />\n      <workItem from=\"1718786956706\" duration=\"16000\" />\n      <workItem from=\"1718793447273\" duration=\"8563000\" />\n      <workItem from=\"1719299747255\" duration=\"15592000\" />\n      <workItem from=\"1719490037708\" duration=\"11522000\" />\n      <workItem from=\"1719912302597\" duration=\"17000\" />\n      <workItem from=\"1719915067868\" duration=\"58980000\" />\n      <workItem from=\"1720106001588\" duration=\"6583000\" />\n      <workItem from=\"1721224082603\" duration=\"2749000\" />\n      <workItem from=\"1721296210313\" duration=\"1943000\" />\n      <workItem from=\"1721306331675\" duration=\"7710000\" />\n      <workItem from=\"1721639785989\" duration=\"18872000\" />\n      <workItem from=\"1721894136037\" duration=\"11000\" />\n      <workItem from=\"1721895861077\" duration=\"43000\" />\n      <workItem from=\"1721895911601\" duration=\"6000\" />\n      <workItem from=\"1721896001303\" duration=\"43000\" />\n      <workItem from=\"1721896208432\" duration=\"495000\" />\n      <workItem from=\"1721897667828\" duration=\"564000\" />\n      <workItem from=\"1721898250822\" duration=\"14560000\" />\n      <workItem from=\"1723114906806\" duration=\"51000\" />\n      <workItem from=\"1723114965830\" duration=\"7000\" />\n      <workItem from=\"1723114990345\" duration=\"1056000\" />\n      <workItem from=\"1723116139902\" duration=\"41000\" />\n      <workItem from=\"1723466366060\" duration=\"1205000\" />\n      <workItem from=\"1723472255181\" duration=\"5986000\" />\n      <workItem from=\"1723540054245\" duration=\"42979000\" />\n      <workItem from=\"1724835144842\" duration=\"81255000\" />\n      <workItem from=\"1725979379019\" duration=\"1326000\" />\n      <workItem from=\"1725981957362\" duration=\"9000\" />\n      <workItem from=\"1726050491827\" duration=\"2782000\" />\n      <workItem from=\"1726060824560\" duration=\"84000\" />\n      <workItem from=\"1726061166763\" duration=\"267000\" />\n      <workItem from=\"1727168497290\" duration=\"714000\" />\n      <workItem from=\"1727185382320\" duration=\"241000\" />\n      <workItem from=\"1727187846238\" duration=\"26125000\" />\n      <workItem from=\"1727362413760\" duration=\"7184000\" />\n      <workItem from=\"1727787071327\" duration=\"16420000\" />\n      <workItem from=\"1727875388661\" duration=\"27811000\" />\n      <workItem from=\"1728307717828\" duration=\"12709000\" />\n      <workItem from=\"1728382218092\" duration=\"15490000\" />\n      <workItem from=\"1728461992802\" duration=\"22072000\" />\n      <workItem from=\"1729087284598\" duration=\"4996000\" />\n      <workItem from=\"1731672432788\" duration=\"700000\" />\n      <workItem from=\"1732017479940\" duration=\"101000\" />\n      <workItem from=\"1732017583845\" duration=\"2124000\" />\n      <workItem from=\"1732029201745\" duration=\"11000\" />\n      <workItem from=\"1732032831579\" duration=\"1624000\" />\n      <workItem from=\"1732099732700\" duration=\"25000\" />\n      <workItem from=\"1732196644157\" duration=\"2844000\" />\n      <workItem from=\"1732714032606\" duration=\"8000\" />\n      <workItem from=\"1733217108676\" duration=\"7386000\" />\n      <workItem from=\"1733229543102\" duration=\"40000\" />\n      <workItem from=\"1733240854537\" duration=\"635000\" />\n      <workItem from=\"1733748626931\" duration=\"6957000\" />\n      <workItem from=\"1737651251661\" duration=\"192000\" />\n      <workItem from=\"1737973292450\" duration=\"105000\" />\n      <workItem from=\"1738052094825\" duration=\"2859000\" />\n      <workItem from=\"1740568468703\" duration=\"79000\" />\n      <workItem from=\"1741276810657\" duration=\"1133000\" />\n      <workItem from=\"1741680621635\" duration=\"1830000\" />\n      <workItem from=\"1742290960380\" duration=\"9464000\" />\n    </task>\n    <task id=\"LOCAL-00092\" summary=\"adding of the JS file for the dashboard\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727273995824</created>\n      <option name=\"number\" value=\"00092\" />\n      <option name=\"presentableId\" value=\"LOCAL-00092\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727273995824</updated>\n    </task>\n    <task id=\"LOCAL-00093\" summary=\"handling of the authors without affiliations\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727274026820</created>\n      <option name=\"number\" value=\"00093\" />\n      <option name=\"presentableId\" value=\"LOCAL-00093\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727274026820</updated>\n    </task>\n    <task id=\"LOCAL-00094\" summary=\"corrections of the api calls for the line chart, for the software retrieval from a struct, and adding of a call to retrieve all the type of institutions in the DB\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727274155182</created>\n      <option name=\"number\" value=\"00094\" />\n      <option name=\"presentableId\" value=\"LOCAL-00094\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727274155182</updated>\n    </task>\n    <task id=\"LOCAL-00095\" summary=\"moving files for dev\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727274195813</created>\n      <option name=\"number\" value=\"00095\" />\n      <option name=\"presentableId\" value=\"LOCAL-00095\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727274195813</updated>\n    </task>\n    <task id=\"LOCAL-00096\" summary=\"moving files for dev\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727274209554</created>\n      <option name=\"number\" value=\"00096\" />\n      <option name=\"presentableId\" value=\"LOCAL-00096\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727274209554</updated>\n    </task>\n    <task id=\"LOCAL-00097\" summary=\"cleaning of the main JS file (I mooved the JS to the new dashboard.js file)\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727274278864</created>\n      <option name=\"number\" value=\"00097\" />\n      <option name=\"presentableId\" value=\"LOCAL-00097\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727274278865</updated>\n    </task>\n    <task id=\"LOCAL-00098\" summary=\"cleaning of a print\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727274303392</created>\n      <option name=\"number\" value=\"00098\" />\n      <option name=\"presentableId\" value=\"LOCAL-00098\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727274303392</updated>\n    </task>\n    <task id=\"LOCAL-00099\" summary=\"adding of the css for the institutions type\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727274333436</created>\n      <option name=\"number\" value=\"00099\" />\n      <option name=\"presentableId\" value=\"LOCAL-00099\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727274333436</updated>\n    </task>\n    <task id=\"LOCAL-00100\" summary=\"update of the old edges collections' names\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727274999792</created>\n      <option name=\"number\" value=\"00100\" />\n      <option name=\"presentableId\" value=\"LOCAL-00100\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727274999792</updated>\n    </task>\n    <task id=\"LOCAL-00101\" summary=\"correction of the display of the authors and the structure for the bubble chart\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727797119837</created>\n      <option name=\"number\" value=\"00101\" />\n      <option name=\"presentableId\" value=\"LOCAL-00101\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727797119837</updated>\n    </task>\n    <task id=\"LOCAL-00102\" summary=\"deletion of the relation structures and the vertexes\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727799531225</created>\n      <option name=\"number\" value=\"00102\" />\n      <option name=\"presentableId\" value=\"LOCAL-00102\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727799531225</updated>\n    </task>\n    <task id=\"LOCAL-00103\" summary=\"correction of the links for authors with the new db\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727799556080</created>\n      <option name=\"number\" value=\"00103\" />\n      <option name=\"presentableId\" value=\"LOCAL-00103\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727799556080</updated>\n    </task>\n    <task id=\"LOCAL-00104\" summary=\"correction of the data directory path\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727800236667</created>\n      <option name=\"number\" value=\"00104\" />\n      <option name=\"presentableId\" value=\"LOCAL-00104\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727800236667</updated>\n    </task>\n    <task id=\"LOCAL-00105\" summary=\"workspace\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727800716756</created>\n      <option name=\"number\" value=\"00105\" />\n      <option name=\"presentableId\" value=\"LOCAL-00105\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727800716756</updated>\n    </task>\n    <task id=\"LOCAL-00106\" summary=\"adding of the gitignore\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727800988755</created>\n      <option name=\"number\" value=\"00106\" />\n      <option name=\"presentableId\" value=\"LOCAL-00106\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727800988756</updated>\n    </task>\n    <task id=\"LOCAL-00107\" summary=\"adding of the gitignore\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727801065014</created>\n      <option name=\"number\" value=\"00107\" />\n      <option name=\"presentableId\" value=\"LOCAL-00107\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727801065014</updated>\n    </task>\n    <task id=\"LOCAL-00108\" summary=\"order the types of institutions and then alphabeticaly the institutions' name\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727876435216</created>\n      <option name=\"number\" value=\"00108\" />\n      <option name=\"presentableId\" value=\"LOCAL-00108\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727876435216</updated>\n    </task>\n    <task id=\"LOCAL-00109\" summary=\"rerouting dashboard/structure adding of the icons with links\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727967314139</created>\n      <option name=\"number\" value=\"00109\" />\n      <option name=\"presentableId\" value=\"LOCAL-00109\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727967314139</updated>\n    </task>\n    <task id=\"LOCAL-00110\" summary=\"debugging the software route to be different from the dashboard\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1727968608990</created>\n      <option name=\"number\" value=\"00110\" />\n      <option name=\"presentableId\" value=\"LOCAL-00110\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1727968608990</updated>\n    </task>\n    <task id=\"LOCAL-00111\" summary=\"Adding of a bigger corpus\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1728308570776</created>\n      <option name=\"number\" value=\"00111\" />\n      <option name=\"presentableId\" value=\"LOCAL-00111\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1728308570777</updated>\n    </task>\n    <task id=\"LOCAL-00112\" summary=\"Correction for arango's connexion in the VM\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1728309581314</created>\n      <option name=\"number\" value=\"00112\" />\n      <option name=\"presentableId\" value=\"LOCAL-00112\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1728309581314</updated>\n    </task>\n    <task id=\"LOCAL-00113\" summary=\"Correction of the display of the structures in the dashboard\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1728309805536</created>\n      <option name=\"number\" value=\"00113\" />\n      <option name=\"presentableId\" value=\"LOCAL-00113\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1728309805536</updated>\n    </task>\n    <task id=\"LOCAL-00114\" summary=\"Correction of query for the display of the dashboard\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1728312760869</created>\n      <option name=\"number\" value=\"00114\" />\n      <option name=\"presentableId\" value=\"LOCAL-00114\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1728312760870</updated>\n    </task>\n    <task id=\"LOCAL-00115\" summary=\"Adding of a title for the software route\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1728377406529</created>\n      <option name=\"number\" value=\"00115\" />\n      <option name=\"presentableId\" value=\"LOCAL-00115\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1728377406529</updated>\n    </task>\n    <task id=\"LOCAL-00116\" summary=\"Adding of the new logos\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1728380758574</created>\n      <option name=\"number\" value=\"00116\" />\n      <option name=\"presentableId\" value=\"LOCAL-00116\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1728380758574</updated>\n    </task>\n    <task id=\"LOCAL-00117\" summary=\"Adding of the new route /home\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1728980827237</created>\n      <option name=\"number\" value=\"00117\" />\n      <option name=\"presentableId\" value=\"LOCAL-00117\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1728980827238</updated>\n    </task>\n    <task id=\"LOCAL-00118\" summary=\"Adding of a screenshot and correction of the ./home\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1729241183141</created>\n      <option name=\"number\" value=\"00118\" />\n      <option name=\"presentableId\" value=\"LOCAL-00118\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1729241183141</updated>\n    </task>\n    <task id=\"LOCAL-00119\" summary=\"deleted screenshot\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1729241302347</created>\n      <option name=\"number\" value=\"00119\" />\n      <option name=\"presentableId\" value=\"LOCAL-00119\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1729241302347</updated>\n    </task>\n    <task id=\"LOCAL-00120\" summary=\"cleaned requirements.txt\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1732022987315</created>\n      <option name=\"number\" value=\"00120\" />\n      <option name=\"presentableId\" value=\"LOCAL-00120\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1732022987316</updated>\n    </task>\n    <task id=\"LOCAL-00121\" summary=\"remove old route `doc/`\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1733223187547</created>\n      <option name=\"number\" value=\"00121\" />\n      <option name=\"presentableId\" value=\"LOCAL-00121\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733223187547</updated>\n    </task>\n    <task id=\"LOCAL-00122\" summary=\"adding of the search function in the software route\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1733226624425</created>\n      <option name=\"number\" value=\"00122\" />\n      <option name=\"presentableId\" value=\"LOCAL-00122\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733226624425</updated>\n    </task>\n    <task id=\"LOCAL-00123\" summary=\"shift from route loading of the bubble chart to a JS api call\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1733752459755</created>\n      <option name=\"number\" value=\"00123\" />\n      <option name=\"presentableId\" value=\"LOCAL-00123\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733752459756</updated>\n    </task>\n    <task id=\"LOCAL-00124\" summary=\"adding of the new displays for the route /&lt;software&gt;\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1733753732972</created>\n      <option name=\"number\" value=\"00124\" />\n      <option name=\"presentableId\" value=\"LOCAL-00124\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733753732972</updated>\n    </task>\n    <task id=\"LOCAL-00125\" summary=\"update for the mentions in /software\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1733915649177</created>\n      <option name=\"number\" value=\"00125\" />\n      <option name=\"presentableId\" value=\"LOCAL-00125\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733915649177</updated>\n    </task>\n    <task id=\"LOCAL-00126\" summary=\"docker compose yml with the restart\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1738058214655</created>\n      <option name=\"number\" value=\"00126\" />\n      <option name=\"presentableId\" value=\"LOCAL-00126\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738058214656</updated>\n    </task>\n    <task id=\"LOCAL-00127\" summary=\"adding of the update for /doc\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1738058241695</created>\n      <option name=\"number\" value=\"00127\" />\n      <option name=\"presentableId\" value=\"LOCAL-00127\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738058241695</updated>\n    </task>\n    <task id=\"LOCAL-00128\" summary=\"process only 200 files for dev purposes\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1738058270172</created>\n      <option name=\"number\" value=\"00128\" />\n      <option name=\"presentableId\" value=\"LOCAL-00128\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738058270172</updated>\n    </task>\n    <task id=\"LOCAL-00129\" summary=\"process every files for the VM\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1738058440216</created>\n      <option name=\"number\" value=\"00129\" />\n      <option name=\"presentableId\" value=\"LOCAL-00129\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738058440216</updated>\n    </task>\n    <task id=\"LOCAL-00130\" summary=\"new docker compose and I deleted wait_for_it\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1741276937410</created>\n      <option name=\"number\" value=\"00130\" />\n      <option name=\"presentableId\" value=\"LOCAL-00130\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1741276937411</updated>\n    </task>\n    <task id=\"LOCAL-00131\" summary=\"dockerfile\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1741277118913</created>\n      <option name=\"number\" value=\"00131\" />\n      <option name=\"presentableId\" value=\"LOCAL-00131\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1741277118913</updated>\n    </task>\n    <task id=\"LOCAL-00132\" summary=\"dockerfile\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1741277302497</created>\n      <option name=\"number\" value=\"00132\" />\n      <option name=\"presentableId\" value=\"LOCAL-00132\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1741277302497</updated>\n    </task>\n    <task id=\"LOCAL-00133\" summary=\"removale of an html element that is obsolete\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1742301244644</created>\n      <option name=\"number\" value=\"00133\" />\n      <option name=\"presentableId\" value=\"LOCAL-00133\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1742301244644</updated>\n    </task>\n    <task id=\"LOCAL-00134\" summary=\"adding of the urls checked by SH\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1742302916449</created>\n      <option name=\"number\" value=\"00134\" />\n      <option name=\"presentableId\" value=\"LOCAL-00134\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1742302916449</updated>\n    </task>\n    <task id=\"LOCAL-00135\" summary=\"correction for the VM\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1742305565825</created>\n      <option name=\"number\" value=\"00135\" />\n      <option name=\"presentableId\" value=\"LOCAL-00135\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1742305565825</updated>\n    </task>\n    <task id=\"LOCAL-00136\" summary=\"correction for the VM\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1742306256868</created>\n      <option name=\"number\" value=\"00136\" />\n      <option name=\"presentableId\" value=\"LOCAL-00136\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1742306256868</updated>\n    </task>\n    <task id=\"LOCAL-00137\" summary=\"correction for the VM\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1742306378018</created>\n      <option name=\"number\" value=\"00137\" />\n      <option name=\"presentableId\" value=\"LOCAL-00137\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1742306378018</updated>\n    </task>\n    <task id=\"LOCAL-00138\" summary=\"adding of nano and curl in the Dockerfile\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1742307321522</created>\n      <option name=\"number\" value=\"00138\" />\n      <option name=\"presentableId\" value=\"LOCAL-00138\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1742307321522</updated>\n    </task>\n    <task id=\"LOCAL-00139\" summary=\"handle files with no url\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1742308358497</created>\n      <option name=\"number\" value=\"00139\" />\n      <option name=\"presentableId\" value=\"LOCAL-00139\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1742308358497</updated>\n    </task>\n    <task id=\"LOCAL-00140\" summary=\"handle files with no url\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1742308972819</created>\n      <option name=\"number\" value=\"00140\" />\n      <option name=\"presentableId\" value=\"LOCAL-00140\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1742308972820</updated>\n    </task>\n    <option name=\"localTasksCounter\" value=\"141\" />\n    <servers />\n  </component>\n  <component name=\"TypeScriptGeneratedFilesManager\">\n    <option name=\"version\" value=\"3\" />\n  </component>\n  <component name=\"Vcs.Log.Tabs.Properties\">\n    <option name=\"TAB_STATES\">\n      <map>\n        <entry key=\"MAIN\">\n          <value>\n            <State />\n          </value>\n        </entry>\n      </map>\n    </option>\n  </component>\n  <component name=\"VcsManagerConfiguration\">\n    <MESSAGE value=\"Correction for arango's connexion in the VM\" />\n    <MESSAGE value=\"Correction of the display of the structures in the dashboard\" />\n    <MESSAGE value=\"Correction of query for the display of the dashboard\" />\n    <MESSAGE value=\"Adding of a title for the software route\" />\n    <MESSAGE value=\"Adding of the new logos\" />\n    <MESSAGE value=\"Adding of the new route /home\" />\n    <MESSAGE value=\"Adding of a screenshot and correction of the ./home\" />\n    <MESSAGE value=\"deleted screenshot\" />\n    <MESSAGE value=\"cleaned requirements.txt\" />\n    <MESSAGE value=\"remove old route `doc/`\" />\n    <MESSAGE value=\"adding of the search function in the software route\" />\n    <MESSAGE value=\"shift from route loading of the bubble chart to a JS api call\" />\n    <MESSAGE value=\"adding of the new displays for the route /&lt;software&gt;\" />\n    <MESSAGE value=\"update for the mentions in /software\" />\n    <MESSAGE value=\"docker compose yml with the restart\" />\n    <MESSAGE value=\"adding of the update for /doc\" />\n    <MESSAGE value=\"process only 200 files for dev purposes\" />\n    <MESSAGE value=\"process every files for the VM\" />\n    <MESSAGE value=\"new docker compose and I deleted wait_for_it\" />\n    <MESSAGE value=\"dockerfile\" />\n    <MESSAGE value=\"removale of an html element that is obsolete\" />\n    <MESSAGE value=\"adding of the urls checked by SH\" />\n    <MESSAGE value=\"correction for the VM\" />\n    <MESSAGE value=\"adding of nano and curl in the Dockerfile\" />\n    <MESSAGE value=\"handle files with no url\" />\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"handle files with no url\" />\n  </component>\n  <component name=\"com.intellij.coverage.CoverageDataManagerImpl\">\n    <SUITE FILE_PATH=\"coverage/SOFTware_Viz$test.coverage\" NAME=\"test Coverage Results\" MODIFIED=\"1723646975241\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"\" />\n    <SUITE FILE_PATH=\"coverage/SOFTware_Viz$run.coverage\" NAME=\"run Coverage Results\" MODIFIED=\"1742308853738\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$\" />\n    <SUITE FILE_PATH=\"coverage/SOFTware_Viz$dashboard.coverage\" NAME=\"dashboard Coverage Results\" MODIFIED=\"1716448844500\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"true\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/Utils\" />\n    <SUITE FILE_PATH=\"coverage/SOFTware_Viz$SOFTware_Viz.coverage\" NAME=\"SOFTware-Viz Coverage Results\" MODIFIED=\"1713173435556\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"true\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"\" />\n    <SUITE FILE_PATH=\"coverage/SOFTware_Viz$.coverage\" NAME=\" Coverage Results\" MODIFIED=\"1723627198648\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$\" />\n  </component>\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 45b24c9d709ee6fea6ac83cee4262a06626878f3)
+++ b/.idea/workspace.xml	(date 1745917092995)
@@ -4,15 +4,10 @@
     <option name="autoReloadType" value="SELECTIVE" />
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="d4ff7c56-eadf-4a19-8d04-3bdf1d26371c" name="Changes" comment="handle files with no url">
+    <list default="true" id="d4ff7c56-eadf-4a19-8d04-3bdf1d26371c" name="Changes" comment="correction for the abstract in the /doc/ route">
       <change afterPath="$PROJECT_DIR$/corpus_I.zip" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/Utils/db.py" beforeDir="false" afterPath="$PROJECT_DIR$/Utils/db.py" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/app/app.py" beforeDir="false" afterPath="$PROJECT_DIR$/app/app.py" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/static/data/xml_files/log_xml/hal-01981553.grobid.tei.xml.log" beforeDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/static/data/xml_files/log_xml/hal-03599214.grobid.tei.xml.log" beforeDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/static/data/xml_files/log_xml/hal-03905078.grobid.tei.xml.log" beforeDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/static/data/xml_files/log_xml/hal-04214094.grobid.tei.xml.log" beforeDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/static/data/xml_files/log_xml/hal-04351729.grobid.tei.xml.log" beforeDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -75,31 +70,31 @@
     <option name="showLibraryContents" value="true" />
     <option name="showMembers" value="true" />
   </component>
-  <component name="PropertiesComponent"><![CDATA[{
-  "keyToString": {
-    "DefaultHtmlFileTemplate": "HTML File",
-    "HTTP Request.generated-requests | #1.executor": "Run",
-    "Python tests.Python tests in test_db.py.executor": "Run",
-    "Python.dashboard.executor": "Run",
-    "Python.run.executor": "Run",
-    "Python.test.executor": "Run",
-    "RunOnceActivity.OpenProjectViewOnStart": "true",
-    "RunOnceActivity.ShowReadmeOnStart": "true",
-    "RunOnceActivity.git.unshallow": "true",
-    "WebServerToolWindowFactoryState": "false",
-    "database.data.extractors.current.export.id": "Comma-separated (CSV)_id",
-    "database.data.extractors.current.id": "Comma-separated (CSV)_id",
-    "git-widget-placeholder": "main",
-    "last_opened_file_path": "/home/sscalber/Bureau/SOFTware/SOFTware-Viz/app/static/data/url_verified_with_SH",
-    "node.js.detected.package.eslint": "true",
-    "node.js.detected.package.tslint": "true",
-    "node.js.selected.package.eslint": "(autodetect)",
-    "node.js.selected.package.tslint": "(autodetect)",
-    "nodejs_package_manager_path": "npm",
-    "settings.editor.selected.configurable": "com.jetbrains.python.configuration.PyActiveSdkModuleConfigurable",
-    "vue.rearranger.settings.migration": "true"
+  <component name="PropertiesComponent">{
+  &quot;keyToString&quot;: {
+    &quot;DefaultHtmlFileTemplate&quot;: &quot;HTML File&quot;,
+    &quot;HTTP Request.generated-requests | #1.executor&quot;: &quot;Run&quot;,
+    &quot;Python tests.Python tests in test_db.py.executor&quot;: &quot;Run&quot;,
+    &quot;Python.dashboard.executor&quot;: &quot;Run&quot;,
+    &quot;Python.run.executor&quot;: &quot;Run&quot;,
+    &quot;Python.test.executor&quot;: &quot;Run&quot;,
+    &quot;RunOnceActivity.OpenProjectViewOnStart&quot;: &quot;true&quot;,
+    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,
+    &quot;RunOnceActivity.git.unshallow&quot;: &quot;true&quot;,
+    &quot;WebServerToolWindowFactoryState&quot;: &quot;false&quot;,
+    &quot;database.data.extractors.current.export.id&quot;: &quot;Comma-separated (CSV)_id&quot;,
+    &quot;database.data.extractors.current.id&quot;: &quot;Comma-separated (CSV)_id&quot;,
+    &quot;git-widget-placeholder&quot;: &quot;main&quot;,
+    &quot;last_opened_file_path&quot;: &quot;/home/sscalber/Bureau/SOFTware/SOFTware-Viz/app/static/data/url_verified_with_SH&quot;,
+    &quot;node.js.detected.package.eslint&quot;: &quot;true&quot;,
+    &quot;node.js.detected.package.tslint&quot;: &quot;true&quot;,
+    &quot;node.js.selected.package.eslint&quot;: &quot;(autodetect)&quot;,
+    &quot;node.js.selected.package.tslint&quot;: &quot;(autodetect)&quot;,
+    &quot;nodejs_package_manager_path&quot;: &quot;npm&quot;,
+    &quot;settings.editor.selected.configurable&quot;: &quot;com.jetbrains.python.configuration.PyActiveSdkModuleConfigurable&quot;,
+    &quot;vue.rearranger.settings.migration&quot;: &quot;true&quot;
   }
-}]]></component>
+}</component>
   <component name="PyCoverageOptionsProvider">
     <option name="myUseBundledCoveragePy" value="true" />
   </component>
@@ -201,9 +196,9 @@
     </configuration>
     <list>
       <item itemvalue="HTTP Request.generated-requests | #1" />
-      <item itemvalue="Python.test" />
       <item itemvalue="Python.dashboard" />
       <item itemvalue="Python.run" />
+      <item itemvalue="Python.test" />
     </list>
     <recent_temporary>
       <list>
@@ -305,14 +300,7 @@
       <workItem from="1741276810657" duration="1133000" />
       <workItem from="1741680621635" duration="1830000" />
       <workItem from="1742290960380" duration="9464000" />
-    </task>
-    <task id="LOCAL-00092" summary="adding of the JS file for the dashboard">
-      <option name="closed" value="true" />
-      <created>1727273995824</created>
-      <option name="number" value="00092" />
-      <option name="presentableId" value="LOCAL-00092" />
-      <option name="project" value="LOCAL" />
-      <updated>1727273995824</updated>
+      <workItem from="1742309228574" duration="2336000" />
     </task>
     <task id="LOCAL-00093" summary="handling of the authors without affiliations">
       <option name="closed" value="true" />
@@ -698,7 +686,15 @@
       <option name="project" value="LOCAL" />
       <updated>1742308972820</updated>
     </task>
-    <option name="localTasksCounter" value="141" />
+    <task id="LOCAL-00141" summary="correction for the abstract in the /doc/ route">
+      <option name="closed" value="true" />
+      <created>1742310220906</created>
+      <option name="number" value="00141" />
+      <option name="presentableId" value="LOCAL-00141" />
+      <option name="project" value="LOCAL" />
+      <updated>1742310220906</updated>
+    </task>
+    <option name="localTasksCounter" value="142" />
     <servers />
   </component>
   <component name="TypeScriptGeneratedFilesManager">
@@ -716,7 +712,6 @@
     </option>
   </component>
   <component name="VcsManagerConfiguration">
-    <MESSAGE value="Correction for arango's connexion in the VM" />
     <MESSAGE value="Correction of the display of the structures in the dashboard" />
     <MESSAGE value="Correction of query for the display of the dashboard" />
     <MESSAGE value="Adding of a title for the software route" />
@@ -741,11 +736,12 @@
     <MESSAGE value="correction for the VM" />
     <MESSAGE value="adding of nano and curl in the Dockerfile" />
     <MESSAGE value="handle files with no url" />
-    <option name="LAST_COMMIT_MESSAGE" value="handle files with no url" />
+    <MESSAGE value="correction for the abstract in the /doc/ route" />
+    <option name="LAST_COMMIT_MESSAGE" value="correction for the abstract in the /doc/ route" />
   </component>
   <component name="com.intellij.coverage.CoverageDataManagerImpl">
     <SUITE FILE_PATH="coverage/SOFTware_Viz$test.coverage" NAME="test Coverage Results" MODIFIED="1723646975241" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="" />
-    <SUITE FILE_PATH="coverage/SOFTware_Viz$run.coverage" NAME="run Coverage Results" MODIFIED="1742308853738" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$" />
+    <SUITE FILE_PATH="coverage/SOFTware_Viz$run.coverage" NAME="run Coverage Results" MODIFIED="1742310100213" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$" />
     <SUITE FILE_PATH="coverage/SOFTware_Viz$dashboard.coverage" NAME="dashboard Coverage Results" MODIFIED="1716448844500" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="true" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$/Utils" />
     <SUITE FILE_PATH="coverage/SOFTware_Viz$SOFTware_Viz.coverage" NAME="SOFTware-Viz Coverage Results" MODIFIED="1713173435556" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="true" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="" />
     <SUITE FILE_PATH="coverage/SOFTware_Viz$.coverage" NAME=" Coverage Results" MODIFIED="1723627198648" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$" />
Index: Utils/db.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import os\nimport json\nfrom tqdm import tqdm\nimport xml.etree.ElementTree as ET\nimport requests\nfrom openpyxl import load_workbook\nfrom Utils.TEI_to_JSON import transformer_TEI_JSON\n\ndef check_or_create_collection(db, collection_name, collection_type='Collection'):\n    \"\"\"\n    Checks if a collection exists in the database. If not, creates the collection.\n    :param db: Database connection\n    :param collection_name: Name of the collection\n    :param collection_type: Type of the collection ('Collection' or 'Edges')\n    :return: The collection object\n    \"\"\"\n    if db.hasCollection(collection_name):\n        return db[collection_name]\n    else:\n        db.createCollection(collection_type, name=collection_name)\n        return db[collection_name]\n\ndef duplicates_JSON(lst):\n    seen = set()\n    duplicates = []\n\n    for item in lst:\n        item_hashable = str(item)\n        if item_hashable in seen:\n            duplicates.append(item)\n        else:\n            seen.add(item_hashable)\n\n    return duplicates\n\n\ndef find_ancestor_paths(current_affiliation_id, ns, tree):\n    # Look for the current structure's relations\n    list_relation = tree.find(\n        f\".//tei:back//tei:listOrg//tei:org[@xml:id='{current_affiliation_id}']//tei:listRelation\", ns)\n\n    # If no relations, we're at the top, return the current structure as the only member of the path\n    if list_relation is None:\n        return [[\n            current_affiliation_id]]  # Return a list with a single path containing the current structure\n\n    # Collect all direct parent relations (and their types)\n    direct_parents = []\n    for relation in list_relation:\n        if relation.attrib.get('type') == 'direct':\n            parent_id = relation.attrib['active'][1:]  # Strip the initial \"#\" for the parent ID\n            direct_parents.append(parent_id)\n\n    # If no direct parents, return the current structure as the topmost node\n    if not direct_parents:\n        return [[current_affiliation_id]]  # Return a path with only the current structure\n\n    # For each direct parent, find its ancestor paths and create a separate list for each path\n    all_paths = []\n    for parent_id in direct_parents:\n        parent_paths = find_ancestor_paths(parent_id, ns, tree)  # Recursive call for each parent\n        for path in parent_paths:\n            all_paths.append(\n                [current_affiliation_id] + path)  # Create a separate path for each relation\n    return all_paths  # Return all paths for the current structure\n\ndef insert_json_db(data_path_json,data_path_xml,db):\n    software_document = []\n    list_errors = []\n    #db.dropAllCollections()\n\n    workbook = load_workbook(filename='./app/static/data/Logiciels_Blacklist_et_autres_remarques.xlsx')\n    sheet = workbook.active\n    data = []\n    for row in sheet.iter_rows(values_only=True):\n        data.append(row)\n    blacklist = []\n    for row in data[1:]:\n        blacklist.append(row[0])\n\n    #load the urls verified with SH\n\n    with open('app/static/data/url_verified_with_SH/urls.json', 'r') as file:\n        urls_verified_sh = json.load(file)\n\n    # Create or retrieve collections\n    documents_collection = check_or_create_collection(db, 'documents')\n    softwares_collection = check_or_create_collection(db, 'softwares')\n    references_collection = check_or_create_collection(db, 'references')\n    authors_collection = check_or_create_collection(db, 'authors')\n    structures_collection = check_or_create_collection(db, 'structures')\n    list_relation_collection = check_or_create_collection(db, 'list_relation')\n\n    # Create or retrieve edge collections\n    doc_struc_edge = check_or_create_collection(db, 'edge_doc_to_struc', 'Edges')\n    auth_struc_edge = check_or_create_collection(db, 'edge_auth_to_struc', 'Edges')\n    doc_soft_edge = check_or_create_collection(db, 'edge_doc_to_software', 'Edges')\n    doc_ref_edge = check_or_create_collection(db, 'edge_doc_to_reference', 'Edges')\n    doc_auth_edge = check_or_create_collection(db, 'edge_doc_to_author', 'Edges')\n    auth_rel_struc_edge = check_or_create_collection(db, 'edge_auth_to_rel_struc', 'Edges')\n\n    data_json_files = os.listdir(data_path_json)\n    data_xml_list = os.listdir(data_path_xml)\n    files_list_registered = db.AQLQuery('FOR hal_id in documents RETURN hal_id.file_hal_id', rawResults=True, batchSize=2000)\n    dict_registered = {}\n    dict_edge_author = {}\n\n    for data_file_xml in tqdm(data_xml_list):\n        file_path = f'{data_path_xml}/{data_file_xml}'\n        file_name = os.path.basename(file_path)\n        while \".\" in file_name:\n            file_name, extension = os.path.splitext(file_name)\n\n        if file_name in files_list_registered:\n            continue\n\n        url = \"https://api.archives-ouvertes.fr/search/\"\n        params = {\n            \"q\": f\"halId_id:{file_name}\",\n            \"rows\": 10,\n            \"fl\": \"citationFull_s\"\n        }\n\n        response = requests.get(url, params=params)\n        if response.status_code == 200:\n            data = response.json()\n            try:\n                citations = data[\"response\"][\"docs\"][0][\"citationFull_s\"]\n            except IndexError:\n                citations = None\n        else:\n            print(\"Error:\", response.status_code)\n        with open(file_path, 'r', encoding='utf-8') as xml_file:\n            data_json_get_document = {}\n            tree = ET.parse(xml_file)\n            root = tree.getroot()\n            ns = {\"tei\": \"http://www.tei-c.org/ns/1.0\", 'xml': 'http://www.w3.org/XML/1998/namespace'}\n\n\n            # DOCUMENT -----------------------------------------------------\n\n            if file_name in urls_verified_sh:\n                urls_list = urls_verified_sh[file_name]\n                data_json_get_document['urls_verified_SH'] = urls_list\n\n            title = tree.find(\".//tei:listBibl//tei:titleStmt//tei:title\", ns)\n            title = title.text\n\n            doc_type = tree.findall(\".//tei:listBibl//tei:biblFull//tei:profileDesc//tei:textClass//tei:classCode\", ns)\n            for tag in doc_type:\n                if tag.attrib.get('n') == 'COMM':\n                    production_date = tree.find(\".//tei:listBibl//tei:biblFull//tei:sourceDesc//tei:biblStruct//tei:monogr//tei:meeting//tei:date[@type='start']\", ns)\n                    if production_date is not None:\n                        data_json_get_document['date'] = production_date.text[:4]\n                else:\n                    production_date = tree.find(\n                        \".//tei:listBibl//tei:biblFull//tei:sourceDesc//tei:biblStruct//tei:monogr//tei:imprint//tei:date[@type='datePub']\",\n                        ns)\n                    if production_date is not None:\n                        data_json_get_document['date'] = production_date.text[:4]\n                    else:\n                        production_date = tree.find(\n                            \".//tei:listBibl//tei:biblFull//tei:editionStmt//tei:edition[@type='current']//tei:date[@type='whenProduced']\",\n                            ns)\n                        if production_date is not None:\n                            data_json_get_document['date'] = production_date.text[:4]\n                        else:\n                            print(f'problem : {file_name}')\n\n\n            abstract = tree.find(\".//{http://www.tei-c.org/ns/1.0}abstract\")\n            if abstract:\n                tag_text = list(abstract)[0]\n                if tag_text.tag == '{http://www.tei-c.org/ns/1.0}p':\n                    abstract = \"\".join(tag_text.itertext())\n                    data_json_get_document['abstract'] = ['HAL' , abstract]\n                if tag_text.tag == '{http://www.tei-c.org/ns/1.0}div':\n                    for p_tag in list(tag_text):\n                        text = \"\".join(p_tag.itertext())\n                    data_json_get_document['abstract'] = ['GROBID' , abstract]\n\n            data_json_get_document['file_hal_id'] = file_name\n            data_json_get_document['citation'] = citations\n            data_json_get_document['title'] = title\n\n            document_document = documents_collection.createDocument(data_json_get_document)\n            document_document.save()\n\n            # SOFTWARE -----------------------------------------------------\n\n            if f\"{file_name}.software.json\" in data_json_files:\n                with open(f'{data_path_json}/{file_name}.software.json', 'r') as json_file:\n                    data_json = json.load(json_file)\n                    data_json_get_mentions = data_json.get(\"mentions\")\n\n                    # Remove duplicates\n                    for elm in duplicates_JSON(data_json_get_mentions):\n                        data_json_get_mentions.remove(elm)\n\n                    # Process each mention\n                    for mention in data_json_get_mentions:\n                        if mention['software-name']['normalizedForm'] not in blacklist:\n                            mention['software_name'] = mention.pop('software-name')\n                            mention['software_type'] = mention.pop('software-type')\n                            software_document = softwares_collection.createDocument(mention)\n                            software_document.save()\n\n                            # Create edge from document to software\n                            edge_doc_soft = doc_soft_edge.createEdge()\n                            edge_doc_soft['_from'] = document_document._id\n                            edge_doc_soft['_to'] = software_document._id\n                            edge_doc_soft.save()\n\n            # REFERENCES -----------------------------------------------------\n\n                    # Process each reference\n                    data_json_get_references = data_json.get(\"references\")\n                    for reference in data_json_get_references:\n                        result_json = []\n                        try:\n                            result_json,error = transformer_TEI_JSON(reference['tei'])\n                            if len(error) > 0:\n                                list_errors.append(error, reference['tei'])\n                        except Exception as e:\n                            print(f\"Error during the transformation from XML to JSON: {e}\")\n                        if result_json:\n                            reference['json'] = result_json\n                        references_document = references_collection.createDocument(reference)\n                        references_document.save()\n\n                        # Create edge from document to reference\n                        edge_doc_ref = doc_ref_edge.createEdge()\n                        edge_doc_ref['_from'] = document_document._id\n                        edge_doc_ref['_to'] = references_document._id\n                        edge_doc_ref.save()\n                # Define the AQL query to fetch software names and their counts\n                query = f\"\"\"\n                FOR doc IN edge_software\n                    FILTER doc._from == \"{document_document._id}\"\n                    LET software = DOCUMENT(doc._to)\n                    COLLECT softwareName = software.software_name.normalizedForm WITH COUNT INTO count\n                    RETURN {{ softwareName, count }}\n                \"\"\"\n\n            # Cleaning the software for the dashboard (maybe obsolete now) -----------------------------------------\n\n                '''# Execute the AQL query to get software names and counts\n                all_software_dict = db.AQLQuery(query, rawResults=True)\n\n                # Fetch distinct software names\n                distinct_query = f\"\"\"\n                FOR doc IN edge_software\n                    FILTER doc._from == \"{document_document._id}\"\n                    LET software = DOCUMENT(doc._to)\n                    RETURN DISTINCT software.software_name.normalizedForm\n                \"\"\"\n                software_name_list = db.AQLQuery(distinct_query, rawResults=True)\n\n                # Convert software names and counts to a dictionary\n                dict_software = {software_dict['softwareName']: software_dict['count'] for software_dict in\n                                 all_software_dict}\n\n                # Process software names containing hyphens and update as needed\n                for software_name in software_name_list:\n                    if \"-\" in software_name:\n                        software_name_cleaned = software_name.replace('-', '')\n                        if software_name_cleaned in dict_software and dict_software[software_name] < dict_software[\n                            software_name_cleaned]:\n                            # Example: Update software name in the database\n                            update_query = f\"\"\"\n                            FOR doc IN edge_software\n                                FILTER doc._from == \"{document_document._id}\"\n                                LET software = DOCUMENT(doc._to)\n                                FILTER software.software_name.normalizedForm == \"{software_name}\"\n                                UPDATE software WITH {{ software_name: {{ normalizedForm: \"{software_name_cleaned}\" }} }} IN softwares\n                            \"\"\"\n                            db.AQLQuery(update_query)'''\n\n            # AUTHORS -----------------------------------------------------\n\n            author_list = tree.findall(\".//tei:listBibl//tei:titleStmt//tei:author\", ns)\n            list_author_old = []\n            for elm in author_list:\n                author = {}\n                persName = elm.find(\"{http://www.tei-c.org/ns/1.0}persName\")\n                author['role'] = elm.attrib['role']\n                author = {}\n\n                # idhal\n                author_id = {}\n                id_halid = None\n                id_halauthorid = None\n                id_halid = elm.findall(\".//tei:idno[@type='idhal']\", ns)\n                if len(id_halid) > 0:\n                    for id_type in id_halid:\n                        author_id[id_type.attrib['notation']] = id_type.text\n                id_halauthorid = elm.find(\".//tei:idno[@type='halauthorid']\", ns)\n                if id_halauthorid is not None:\n                    author_id[id_halauthorid.attrib['type']] = id_halauthorid.text\n                    id_final = 0\n                try:\n                    author_final_id = author_id['numeric']\n                except KeyError:\n                    author_final_id = author_id['halauthorid']\n                if author_final_id in list(dict_registered.keys()):\n                    registered = True\n                else:\n                    registered = False\n\n                # name\n                author_name = {}\n                persName = elm.find(\"{http://www.tei-c.org/ns/1.0}persName\")\n                for name in persName:\n                    author_name[name.tag.split('}')[1]] = name.text\n\n                # document\n                author_documents = []\n                try:\n                    # Create a dictionary for each document and append it to the list\n                    document_data = {\n                        'document_halid': data_file_xml.replace(\".hal.xml\", \"\").replace(\".hal.grobid.xml\", \"\").replace(\".xml\", \"\").replace(\".hal.xml\", \"\"),\n                        'role': elm.attrib['role']\n                    }\n                    author_documents.append(document_data)\n                except KeyError:\n                    # Handle the case where 'role' may not be present, and append with a default 'role'\n                    document_data = {\n                        'document_halid': data_file_xml.replace(\".hal.xml\", \"\").replace(\".hal.grobid.xml\", \"\").replace(\".xml\", \"\").replace(\".hal.xml\", \"\"),\n                        'role': elm.attrib.get('role', 'unknown')\n                    }\n                    author_documents.append(document_data)\n\n                if registered == False:\n\n                    author['id'] = author_id\n                    author['name'] = author_name\n                    author['documents'] = author_documents\n\n                    document_author = authors_collection.createDocument(author)\n                    document_author.save()\n                    dict_registered[author_final_id] = document_author._id\n                    # print(dict_registered)\n                    edge_doc_auth = doc_auth_edge.createEdge()\n                    edge_doc_auth['_from'] = document_document._id\n                    edge_doc_auth['_to'] = document_author._id\n                    edge_doc_auth.save()\n                    author_document_id = document_author._id\n\n                elif registered == True:\n                    author_document_id = dict_registered[author_final_id]\n                    # AQL query to append to the documents and affiliation\n                    aql_query = f'''\n                                FOR doc IN authors\n                                    FILTER doc._id == '{author_document_id}'\n                                    UPDATE doc WITH {{ \n                                        documents: APPEND(doc.documents, {author_documents}, true), \n                                    }} IN authors\n                                '''\n                    # Execute the AQL query\n                    result = db.AQLQuery(aql_query, rawResults=True)\n                    edge_doc_auth = doc_auth_edge.createEdge()\n                    edge_doc_auth['_from'] = document_document._id\n                    edge_doc_auth['_to'] = author_document_id\n                    edge_doc_auth.save()\n            # STRUCT -----------------------------------------------------\n\n                # Main logic to collect paths for all affiliations\n                author_affiliation_paths = []\n                affiliations_list = elm.findall(\"{http://www.tei-c.org/ns/1.0}affiliation\")\n                if len(affiliations_list) > 0:\n                    for affiliation in affiliations_list:\n                        # Start with the affiliation's referenced structure\n                        current_affiliation_id = affiliation.attrib['ref'][1:]  # Strip the initial \"#\"\n                        ancestor_paths = find_ancestor_paths(current_affiliation_id, ns,\n                                                             tree)  # Get all full hierarchy paths\n                        author_affiliation_paths.extend(ancestor_paths)  # Add all paths to the final list\n                        # Dictionary to store document key to _id mappings\n                        document_id_map = {}\n                        for author_affiliation_path in author_affiliation_paths:\n                            list_relation_idstruct = []\n                            for index, structure in enumerate(author_affiliation_path):\n                                result = db.AQLQuery(\n                                    f'FOR struc IN structures FILTER struc.id_haureal == \"{structure}\" RETURN struc._id',\n                                    rawResults=True)\n                                if len(result) == 0:\n                                    affiliated_struct = tree.find(\n                                        f\".//tei:back//tei:listOrg//tei:org[@xml:id='{structure}']\", ns)\n                                    if affiliated_struct is not None:\n                                        affiliated_struct_name = affiliated_struct.findall('tei:orgName', ns)\n                                        if affiliated_struct_name is not None:\n                                            org = {}\n                                            org['status'] = affiliated_struct.attrib['status']\n                                            org['url_team'] = False\n                                            url_team = affiliated_struct.find(\n                                                './/{http://www.tei-c.org/ns/1.0}desc//ref[@type=\"url\"]')\n                                            for url_team in affiliated_struct.find(\n                                                    './/{http://www.tei-c.org/ns/1.0}desc'):\n                                                if url_team.attrib == {'type': 'url'}:\n                                                    org['url_team'] = url_team.text\n                                            try:\n                                                list_affiliated_str = list(affiliated_struct.find(\n                                                    \".//{http://www.tei-c.org/ns/1.0}listRelation\"))\n                                            except TypeError:\n                                                list_affiliated_str = []\n                                            for struct in affiliated_struct_name:\n                                                if struct.attrib:\n                                                    org[struct.attrib['type']] = struct.text\n                                                else:\n                                                    org[\"name\"] = struct.text\n                                            org['id_haureal'] = affiliated_struct.attrib[\"{http://www.w3.org/XML/1998/namespace}id\"]\n                                            org['type'] = affiliated_struct.attrib['type']\n                                            document_org = structures_collection.createDocument(org)\n                                            document_org.save()\n                                            struct_id = document_org._id\n                                else:\n                                    struct_id = result[0]\n                                    pass\n\n                                query = f\"\"\"\n                                            for edge in edge_doc_to_struc\n                                                filter edge._from == \"{document_document._id}\"\n                                                let struct = document(edge._to)\n                                                return struct._id\n                                                \"\"\"\n                                list_registered_edge_struc_doc = db.AQLQuery(query, rawResults=True)\n\n                                if struct_id not in list_registered_edge_struc_doc:\n                                    edge_doc_struc = doc_struc_edge.createEdge()\n                                    edge_doc_struc['_from'] = document_document._id\n                                    edge_doc_struc['_to'] = struct_id\n                                    edge_doc_struc.save()\n\n                                query = f\"\"\"\n                                            for edge in edge_auth_to_struc\n                                                filter edge._from == \"{author_document_id}\"\n                                                let struct = document(edge._to)\n                                                return struct._id\n                                                \"\"\"\n                                list_registered_edge_struc_author = db.AQLQuery(query, rawResults=True)\n\n                                if struct_id not in list_registered_edge_struc_author:\n                                    edge_auth_struc = auth_struc_edge.createEdge()\n                                    edge_auth_struc['_from'] = author_document_id\n                                    edge_auth_struc['_to'] = struct_id\n                                    edge_auth_struc.save()\n\n                                result = db.AQLQuery(\n                                    f'FOR struc IN structures FILTER struc.id_haureal == \"{structure}\" RETURN struc._id',\n                                    rawResults=True)\n                                if result != []:\n                                    list_relation_idstruct.append(result[0])\n\n                            list_relation_documents = list_relation_collection.createDocument({\"list_relation\" : list_relation_idstruct})\n                            list_relation_documents.save()\n\n                        edge_auth_rel_struc = auth_rel_struc_edge.createEdge()\n                        edge_auth_rel_struc['_from'] = author_document_id\n                        edge_auth_rel_struc['_to'] = list_relation_documents._id\n                        edge_auth_rel_struc.save()\n\n    if len(list_errors) > 0:\n       print(list_errors)
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Utils/db.py b/Utils/db.py
--- a/Utils/db.py	(revision 45b24c9d709ee6fea6ac83cee4262a06626878f3)
+++ b/Utils/db.py	(date 1742308156830)
@@ -105,7 +105,7 @@
     dict_registered = {}
     dict_edge_author = {}
 
-    for data_file_xml in tqdm(data_xml_list):
+    for data_file_xml in tqdm(data_xml_list[:100]):
         file_path = f'{data_path_xml}/{data_file_xml}'
         file_name = os.path.basename(file_path)
         while "." in file_name:
